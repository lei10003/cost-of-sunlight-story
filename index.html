<!DOCTYPE html>
<html>

<head>
	<meta charset="utf-8" />
	<meta http-equiv="X-UA-Compatible" content="IE=edge" />
	<title>Work in Progress</title>
	<meta name="description" content="Scrollama: Sticky Overlay Example" />
	<meta name="viewport" content="width=device-width, initial-scale=1" />
	<link rel="stylesheet" href="../style.css" />
	<style>
		#scrolly {
			position: relative;
			background-color: #f6e1b0;
			padding: 1rem;
		}

		article {
			position: relative;
			padding: 0;
			max-width: 20rem;
			margin: 0 auto;
		}

		figure {
			position: -webkit-sticky;
			position: sticky;
			left: 0;
			width: 100%;
			margin: 0;
			-webkit-transform: translate3d(0, 0, 0);
			-moz-transform: translate3d(0, 0, 0);
			transform: translate3d(0, 0, 0);
			background-color: #f4e8e8;
			z-index: 0;
		}

		figure p {
			text-align: center;
			padding: 1rem;
			position: absolute;
			top: 50%;
			left: 50%;
			-moz-transform: translate(-50%, -50%);
			-webkit-transform: translate(-50%, -50%);
			transform: translate(-50%, -50%);
			font-size: 8rem;
			font-weight: 900;
			color: #fff;
		}

		.step {
			margin: 0 auto 2rem auto;
			color: #fff;
			background-color: rgba(0, 0, 0, 0.1);
		}

		.step:last-child {
			margin-bottom: 0;
		}

		.step.is-active p {
			background-color: goldenrod;
			color: #3b3b3b;
		}

		.step p {
			text-align: center;
			padding: 1rem;
			font-size: 1.5rem;
			background-color: #3b3b3b;
		}
	</style>
</head>

<body>

	<main>

		<section id="intro">
			<h1 class="intro__hed">Sticky Overlay Example</h1>
			<p class="intro__dek">
				Start scrolling to see how it works.
			</p>
		</section>

		<section id="scrolly">

			<!-- <figure>
				<p>0</p>
			</figure> -->

			<article>
				<div class="step" data-step="1">
					<p>STEP 1</p>
				</div>
				<div class="step" data-step="2">
					<p>STEP 2</p>
				</div>
				<div class="step" data-step="3">
					<p>STEP 3</p>
				</div>
				<div class="step" data-step="4">
					<p>STEP 4</p>
				</div>
			</article>
<div class="ai2html-container">

				<!-- ai2html goes below this line -->
				<!-- Generated by ai2html v0.102.0 - 2023-07-21 15:36 -->
				<!-- ai file: cost_of_sunlight_buildings_full.ai -->
				<style media="screen,print">
					#g-cost_of_sunlight_buildings_full-box,
					#g-cost_of_sunlight_buildings_full-box .g-artboard {
						margin: 0 auto;
					}

					#g-cost_of_sunlight_buildings_full-box p {
						margin: 0;
					}

					#g-cost_of_sunlight_buildings_full-box .g-aiAbs {
						position: absolute;
					}

					#g-cost_of_sunlight_buildings_full-box .g-aiImg {
						position: absolute;
						top: 0;
						display: block;
						width: 100% !important;
					}

					#g-cost_of_sunlight_buildings_full-box .g-aiSymbol {
						position: absolute;
						box-sizing: border-box;
					}

					#g-cost_of_sunlight_buildings_full-box .g-aiPointText p {
						white-space: nowrap;
					}

					#g-cost_of_sunlight_buildings_full-imac {
						position: relative;
						overflow: hidden;
					}

					#g-cost_of_sunlight_buildings_full-full-size {
						position: relative;
						overflow: hidden;
					}

					#g-cost_of_sunlight_buildings_full-laptop {
						position: relative;
						overflow: hidden;
					}

					#g-cost_of_sunlight_buildings_full-mobile {
						position: relative;
						overflow: hidden;
					}
				</style>

				<div id="g-cost_of_sunlight_buildings_full-box" class="ai2html">

					<!-- Artboard: imac -->
					<div id="g-cost_of_sunlight_buildings_full-imac" class="g-artboard"
						style="width:1806px; height:6180px;" data-aspect-ratio="0.292" data-min-width="1806">
						<div style=""></div>
						<img id="g-cost_of_sunlight_buildings_full-imac-img" class="g-aiImg" alt=""
							src="cost_of_sunlight_buildings_full-imac.png" />
					</div>

					<!-- Artboard: full-size -->
					<div id="g-cost_of_sunlight_buildings_full-full-size" class="g-artboard"
						style="width:874px; height:3347px;" data-aspect-ratio="0.261" data-min-width="874"
						data-max-width="1805">
						<div style=""></div>
						<img id="g-cost_of_sunlight_buildings_full-full-size-img" class="g-aiImg" alt=""
							src="cost_of_sunlight_buildings_full-full-size.png" />
					</div>

					<!-- Artboard: laptop -->
					<div id="g-cost_of_sunlight_buildings_full-laptop" class="g-artboard"
						style="width:690px; height:2554px;" data-aspect-ratio="0.27" data-min-width="690"
						data-max-width="873">
						<div style=""></div>
						<img id="g-cost_of_sunlight_buildings_full-laptop-img" class="g-aiImg" alt=""
							src="cost_of_sunlight_buildings_full-laptop.png" />
					</div>

					<!-- Artboard: mobile -->
					<div id="g-cost_of_sunlight_buildings_full-mobile" class="g-artboard"
						style="max-width: 608px;max-height: 2286px" data-aspect-ratio="0.266" data-min-width="0"
						data-max-width="689">
						<div style="padding: 0 0 375.9539% 0;"></div>
						<img id="g-cost_of_sunlight_buildings_full-mobile-img" class="g-aiImg" alt=""
							src="cost_of_sunlight_buildings_full-mobile.png" />
					</div>

					<!-- Custom HTML -->
					<script src="https://cdnjs.cloudflare.com/ajax/libs/d3/7.3.0/d3.min.js"></script>
					<style>
						.hidden {
							visibility: hidden;
						}
					</style>

					<!-- ai2html goes above this line -->


					
				</div>
			
		</section>

		<section id="outro"></section>
	</main>

	<script src="https://unpkg.com/d3@5.9.1/dist/d3.min.js"></script>
	<script src="../scrollama.min.js"></script>
	<script>
		// using d3 for convenience
		var main = d3.select("main");
		var scrolly = main.select("#scrolly");
		var figure = scrolly.select("figure");
		var article = scrolly.select("article");
		var step = article.selectAll(".step");

		// initialize the scrollama
		var scroller = scrollama();

		// generic window resize listener event
		function handleResize() {
			// 1. update height of step elements
			var stepH = Math.floor(window.innerHeight * 0.75);
			step.style("height", stepH + "px");

			var figureHeight = window.innerHeight / 2;
			var figureMarginTop = (window.innerHeight - figureHeight) / 2;

			figure
				.style("height", figureHeight + "px")
				.style("top", figureMarginTop + "px");

			// 3. tell scrollama to update new element dimensions
			scroller.resize();
		}

		// scrollama event handlers
		function handleStepEnter(response) {
			console.log(response);
			// response = { element, direction, index }

			// add color to current step only
			step.classed("is-active", function (d, i) {
				return i === response.index;
			});

			// update graphic based on step
			figure.select("p").text(response.index + 1);
		}


		function init() {

			// 1. force a resize on load to ensure proper dimensions are sent to scrollama
			handleResize();

			// 2. setup the scroller passing options
			// 		this will also initialize trigger observations
			// 3. bind scrollama event handlers (this can be chained like below)
			scroller
				.setup({
					step: "#scrolly article .step",
					offset: 0.33,
					debug: false
				})
				.onStepEnter(handleStepEnter);
		}

		// kick things off
		init();
	</script>


	<!-- ai2html resizer script -->

	<script type="text/javascript">
		(function () {
			// only want one resizer on the page
			if (document.documentElement.className.indexOf("g-resizer-v3-init") > -1) return;
			document.documentElement.className += " g-resizer-v3-init";
			// require IE9+
			if (!("querySelector" in document)) return;
			function resizer() {
				var elements = Array.prototype.slice.call(document.querySelectorAll(".g-artboard[data-min-width]")),
					widthById = {};
				elements.forEach(function (el) {
					var parent = el.parentNode,
						width = widthById[parent.id] || parent.getBoundingClientRect().width,
						minwidth = el.getAttribute("data-min-width"),
						maxwidth = el.getAttribute("data-max-width");
					widthById[parent.id] = width;

					if (+minwidth <= width && (+maxwidth >= width || maxwidth === null)) {
						el.style.display = "block";
					} else {
						el.style.display = "none";
					}
				});
				try {
					if (window.parent && window.parent.$) {
						window.parent.$("body").trigger("resizedcontent", [window]);
					}
					if (window.require) {
						require(['foundation/main'], function () {
							require(['shared/interactive/instances/app-communicator'], function (AppCommunicator) {
								AppCommunicator.triggerResize();
							});
						});
					}
				} catch (e) { console.log(e); }
			}

			document.addEventListener('DOMContentLoaded', resizer);
			// feel free to replace throttle with _.throttle, if available
			window.addEventListener('resize', throttle(resizer, 200));

			function throttle(func, wait) {
				// from underscore.js
				var _now = Date.now || function () { return new Date().getTime(); },
					context, args, result, timeout = null, previous = 0;
				var later = function () {
					previous = _now();
					timeout = null;
					result = func.apply(context, args);
					if (!timeout) context = args = null;
				};
				return function () {
					var now = _now(), remaining = wait - (now - previous);
					context = this;
					args = arguments;
					if (remaining <= 0 || remaining > wait) {
						if (timeout) {
							clearTimeout(timeout);
							timeout = null;
						}
						previous = now;
						result = func.apply(context, args);
						if (!timeout) context = args = null;
					} else if (!timeout && options.trailing !== false) {
						timeout = setTimeout(later, remaining);
					}
					return result;
				};
			}


		})();
	</script>

</body>

</html>